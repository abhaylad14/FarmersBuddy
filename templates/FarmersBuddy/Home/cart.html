{% extends './base.html' %} {% block title %}Cart{% endblock %} {% block body %}
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
  crossorigin="anonymous"
/>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
  crossorigin="anonymous"
></script>
<div class="container mb-4">
  <div class="card">
    <div class="card-body">
        <div class="row">
            <div class="h4 col">Cart</div>
            <div class="text-right col">
            {% if products %}
                <a class="btn btn-outline-success" href="{% url 'checkout' %}"><i class="fas fa-external-link-alt"></i> Checkout</a>
                {% endif %}
            </div>
        </div>
      <hr />
      {% if not products %}
        <div class="h5 text-center">Your cart is empty</div>
      {% else %}
      <!-- cart products start -->
      <div class="row row-cols-1 row-cols-md-4 g-4">
      {% for item in products %}
        <div class="col mb-4">
          <div class="card h-100">
            <img src="{{item.ProductId.Image.url}}" class="card-img-top" height="200" width="200" alt="...">
            <div class="card-body">
              <h5 class="card-title">{{item.ProductId.Name}}</h5>
              <p class="card-text">{{item.ProductId.Desc}}</p>
              <p class="h5">Price: â‚¹<span id="txtprice">{{item.ProductId.Price}}</span></p>
              <hr>
              <form method="post">{% csrf_token %}
              <div class="row">
                <div class="col-md-4"><label for="qty">Quantity</label></div>
                <div class="col-md-5"><input type="number" value="{{item.Quantity}}" min="1" max="{{item.ProductId.Quantity}}" name="qty" id="qty" required class="form-control"></div>
                <div class="col-md-1">
                    <input type="hidden" name="cid" value="{{item.id}}">
                    <button name="syncqty" class="btn btn-sm btn-success"><i class="fas fa-sync-alt"></i></button>
                </div>
              </div>
            </form>
            </div>
            <div class="card-footer">
                <div class="row">
                    <div class="col">
                        <a class="btn btn-sm btn-primary" href="{% url 'viewproduct' %}?pid={{item.ProductId.id}}">View Product</a>
                    </div>
                    <div class="col-md-2 text-right mr-2">
                        <form method="post"> {% csrf_token %}
                            <input type="hidden" name="cid" value="{{item.id}}">
                            <button type="submit" name="deleteproduct" class="btn btn-danger btn-sm"><i class="fas fa-trash-alt"></i></button>
                        </form>
                    </div>
                </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      <!-- cart products end -->
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
